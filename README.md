# donor-guide-bot
Telegram-бот для ответов на вопросы по донорству

## Описание
Данный Telegram-бот предназначен для автоматического ответа на вопросы, связанные с донорством крови и костного мозга. Проект разработан в рамках курсовой работы в НИУ ВШЭ (г. Пермь).

## Функционал
- Автоматические ответы на часто задаваемые вопросы.
- Поддержка категорий для удобной навигации:
  - Донорство крови
  - Донорство костного мозга
  - Контакты фонда
- Отправка текстовой информации, изображений, ссылок.
- Возможность задать свой вопрос.
  

## Установка и запуск приложения локально
### Предварительные требования
- Python 3.12
- Python venv

### Шаги установки
1. Клонируйте репозиторий:

    ```sh
    git clone https://github.com/hse-perm-sandbox/donor-guide-bot.git
    cd donor-guide-bot
    ```

2. Установите Python 3.12 и модуль `venv` (если они еще не установлены).

3. Создайте виртуальное окружение:

    ```sh
    python3 -m venv .venv
    ```

4. Активируйте виртуальное окружение:

    ```sh
    source .venv/bin/activate
    ```

5. Установите Poetry:

    ```sh
    pip install poetry
    ```

6. Настройте Poetry для создания виртуальных окружений в проекте:

    ```sh
    poetry config virtualenvs.in-project true
    ```

7. Установите зависимости проекта:

    ```sh
    poetry install
    ```

8.  Создайте .env файл с переменными окружения:

    ```
    LOG_LEVEL=WARNING
    TELEGRAM_TOKEN=SET_TOKEN_VALUE
    RESEND_CHAT_ID=SET_CHAT_ID
    ```

9.  Запустите приложение:

    ```sh
    poetry run start
    ```

## Конфигурация приложения

Настройки приложения задаются через класс Settings, который использует библиотеку pydantic-settings для работы с переменными окружения и .env-файлом.

Основные параметры:
- LOG_LEVEL — уровень логирования (по умолчанию: WARNING).
- TELEGRAM_TOKEN — токен Telegram-бота.
- RESEND_CHAT_ID — ID чата для пересылки сообщений.

Задать параметры приложения можно:
  - Через .env-файл в корне проекта:
    
    ```ini
    TELEGRAM_TOKEN=your_telegram_bot_token
    RESEND_CHAT_ID=12345
    ```

  - Через переменные окружения:
    ```sh
    export TELEGRAM_TOKEN="your_telegram_bot_token"
    ```

### Приоритеты загрузки

Настройки загружаются в следующем порядке:
1. Значения по умолчанию из класса Settings.
2. Переменные из файла .env.
3. Переменные окружения системы (имеют высший приоритет).

Файл .env игнорируется в Git (указан в .gitignore), чтобы избежать утечки чувствительных данных данных.